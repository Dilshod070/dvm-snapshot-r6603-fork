//#include "../tools/pppa/src/statlist.h"
#include "../tools/pppa/src/integration.h"
#include <iostream>
#include <string>

int main(int argv, char ** argc) {
//  CStat s;
	try {
//		printf("go to init\n");
//		s.init((char*)("sts.gz+"));
//        json j;
//        s.to_json(j);
        char *res1, *res2;

        const char * s1 = "{\"inter\":[{\"id\":{\"expr\":2000000000,\"nenter\":1.0,\"nlev\":0,\"nline\":20,\"nline_end\":92,\"pname\":\"jac2d.c\",\"t\":21},\"times\":{\"comm\":4.076957702636719e-05,\"comm_start\":0.0,\"efficiency\":0.9997661784673614,\"exec_time\":0.1743619441986084,\"gpu_time_lost\":0.0,\"gpu_time_prod\":0.0,\"idle\":0.0,\"insuf\":0.0,\"insuf_sys\":0.0,\"insuf_user\":0.0,\"load_imb\":0.0,\"lost_time\":4.076957702636719e-05,\"nproc\":1,\"overlap\":1.0251998901367188e-05,\"prod_cpu\":0.16165733337402344,\"prod_io\":0.011024713516235352,\"prod_sys\":0.0016391277313232422,\"real_comm\":1.9073486328125e-06,\"synch\":0.0,\"sys_time\":0.1743619441986084,\"thr_sys_time\":0.0,\"thr_user_time\":0.0,\"threadsOfAllProcs\":4,\"time_var\":0.0}},{\"id\":{\"expr\":1,\"nenter\":1.0,\"nlev\":1,\"nline\":29,\"nline_end\":36,\"pname\":\"jac2d.c\",\"t\":23},\"times\":{\"comm\":0.0,\"comm_start\":0.0,\"efficiency\":1.0,\"exec_time\":9.799003601074219e-05,\"gpu_time_lost\":0.0,\"gpu_time_prod\":0.0,\"idle\":0.0,\"insuf\":0.0,\"insuf_sys\":0.0,\"insuf_user\":0.0,\"load_imb\":0.0,\"lost_time\":0.0,\"nproc\":1,\"overlap\":0.0,\"prod_cpu\":7.152557373046875e-06,\"prod_io\":0.0,\"prod_sys\":9.083747863769531e-05,\"real_comm\":0.0,\"synch\":0.0,\"sys_time\":9.799003601074219e-05,\"thr_sys_time\":0.0,\"thr_user_time\":0.0,\"threadsOfAllProcs\":4,\"time_var\":0.0}},{\"id\":{\"expr\":11,\"nenter\":1.0,\"nlev\":2,\"nline\":30,\"nline_end\":31,\"pname\":\"jac2d.c\",\"t\":23},\"times\":{\"comm\":0.0,\"comm_start\":0.0,\"efficiency\":1.0,\"exec_time\":2.4080276489257813e-05,\"gpu_time_lost\":0.0,\"gpu_time_prod\":0.0,\"idle\":0.0,\"insuf\":0.0,\"insuf_sys\":0.0,\"insuf_user\":0.0,\"load_imb\":0.0,\"lost_time\":0.0,\"nproc\":1,\"overlap\":0.0,\"prod_cpu\":3.0994415283203125e-06,\"prod_io\":0.0,\"prod_sys\":2.09808349609375e-05,\"real_comm\":0.0,\"synch\":0.0,\"sys_time\":2.4080276489257813e-05,\"thr_sys_time\":0.0,\"thr_user_time\":0.0,\"threadsOfAllProcs\":4,\"time_var\":0.0}},{\"id\":{\"expr\":12,\"nenter\":1.0,\"nlev\":2,\"nline\":32,\"nline_end\":33,\"pname\":\"jac2d.c\",\"t\":23},\"times\":{\"comm\":0.0,\"comm_start\":0.0,\"efficiency\":1.0,\"exec_time\":2.8133392333984375e-05,\"gpu_time_lost\":0.0,\"gpu_time_prod\":0.0,\"idle\":0.0,\"insuf\":0.0,\"insuf_sys\":0.0,\"insuf_user\":0.0,\"load_imb\":0.0,\"lost_time\":0.0,\"nproc\":1,\"overlap\":0.0,\"prod_cpu\":1.1920928955078125e-06,\"prod_io\":0.0,\"prod_sys\":2.6941299438476563e-05,\"real_comm\":0.0,\"synch\":0.0,\"sys_time\":2.8133392333984375e-05,\"thr_sys_time\":0.0,\"thr_user_time\":0.0,\"threadsOfAllProcs\":4,\"time_var\":0.0}},{\"id\":{\"expr\":13,\"nenter\":1.0,\"nlev\":2,\"nline\":34,\"nline_end\":35,\"pname\":\"jac2d.c\",\"t\":23},\"times\":{\"comm\":0.0,\"comm_start\":0.0,\"efficiency\":1.0,\"exec_time\":2.193450927734375e-05,\"gpu_time_lost\":0.0,\"gpu_time_prod\":0.0,\"idle\":0.0,\"insuf\":0.0,\"insuf_sys\":0.0,\"insuf_user\":0.0,\"load_imb\":0.0,\"lost_time\":0.0,\"nproc\":1,\"overlap\":0.0,\"prod_cpu\":9.5367431640625e-07,\"prod_io\":0.0,\"prod_sys\":2.09808349609375e-05,\"real_comm\":0.0,\"synch\":0.0,\"sys_time\":2.193450927734375e-05,\"thr_sys_time\":0.0,\"thr_user_time\":0.0,\"threadsOfAllProcs\":4,\"time_var\":0.0}},{\"id\":{\"expr\":2,\"nenter\":1.0,\"nlev\":1,\"nline\":38,\"nline_end\":43,\"pname\":\"jac2d.c\",\"t\":23},\"times\":{\"comm\":0.0,\"comm_start\":0.0,\"efficiency\":1.0,\"exec_time\":6.890296936035156e-05,\"gpu_time_lost\":0.0,\"gpu_time_prod\":0.0,\"idle\":0.0,\"insuf\":0.0,\"insuf_sys\":0.0,\"insuf_user\":0.0,\"load_imb\":0.0,\"lost_time\":0.0,\"nproc\":1,\"overlap\":0.0,\"prod_cpu\":9.5367431640625e-07,\"prod_io\":0.0,\"prod_sys\":6.794929504394531e-05,\"real_comm\":0.0,\"synch\":0.0,\"sys_time\":6.890296936035156e-05,\"thr_sys_time\":0.0,\"thr_user_time\":0.0,\"threadsOfAllProcs\":4,\"time_var\":0.0}},{\"id\":{\"expr\":21,\"nenter\":1.0,\"nlev\":2,\"nline\":39,\"nline_end\":40,\"pname\":\"jac2d.c\",\"t\":23},\"times\":{\"comm\":0.0,\"comm_start\":0.0,\"efficiency\":1.0,\"exec_time\":2.4080276489257813e-05,\"gpu_time_lost\":0.0,\"gpu_time_prod\":0.0,\"idle\":0.0,\"insuf\":0.0,\"insuf_sys\":0.0,\"insuf_user\":0.0,\"load_imb\":0.0,\"lost_time\":0.0,\"nproc\":1,\"overlap\":0.0,\"prod_cpu\":0.0,\"prod_io\":0.0,\"prod_sys\":2.4080276489257813e-05,\"real_comm\":0.0,\"synch\":0.0,\"sys_time\":2.4080276489257813e-05,\"thr_sys_time\":0.0,\"thr_user_time\":0.0,\"threadsOfAllProcs\":4,\"time_var\":0.0}},{\"id\":{\"expr\":22,\"nenter\":1.0,\"nlev\":2,\"nline\":41,\"nline_end\":42,\"pname\":\"jac2d.c\",\"t\":23},\"times\":{\"comm\":0.0,\"comm_start\":0.0,\"efficiency\":1.0,\"exec_time\":2.193450927734375e-05,\"gpu_time_lost\":0.0,\"gpu_time_prod\":0.0,\"idle\":0.0,\"insuf\":0.0,\"insuf_sys\":0.0,\"insuf_user\":0.0,\"load_imb\":0.0,\"lost_time\":0.0,\"nproc\":1,\"overlap\":0.0,\"prod_cpu\":9.5367431640625e-07,\"prod_io\":0.0,\"prod_sys\":2.09808349609375e-05,\"real_comm\":0.0,\"synch\":0.0,\"sys_time\":2.193450927734375e-05,\"thr_sys_time\":0.0,\"thr_user_time\":0.0,\"threadsOfAllProcs\":4,\"time_var\":0.0}},{\"id\":{\"expr\":4,\"nenter\":1.0,\"nlev\":1,\"nline\":86,\"nline_end\":91,\"pname\":\"jac2d.c\",\"t\":23},\"times\":{\"comm\":0.0,\"comm_start\":0.0,\"efficiency\":1.0,\"exec_time\":0.010898113250732422,\"gpu_time_lost\":0.0,\"gpu_time_prod\":0.0,\"idle\":0.0,\"insuf\":0.0,\"insuf_sys\":0.0,\"insuf_user\":0.0,\"load_imb\":0.0,\"lost_time\":0.0,\"nproc\":1,\"overlap\":0.0,\"prod_cpu\":3.981590270996094e-05,\"prod_io\":0.010836124420166016,\"prod_sys\":2.2172927856445313e-05,\"real_comm\":1.9073486328125e-06,\"synch\":0.0,\"sys_time\":0.010898113250732422,\"thr_sys_time\":0.0,\"thr_user_time\":0.0,\"threadsOfAllProcs\":4,\"time_var\":0.0}}],\"iscomp\":false,\"nproc\":1,\"proc\":[{\"node_name\":\"MacBook-Penek.local\",\"test_time\":0.8039350000000001}]}";
        const char * s2 = "{\"inter\":[{\"id\":{\"expr\":2000000000,\"nenter\":1.0,\"nlev\":0,\"nline\":20,\"nline_end\":92,\"pname\":\"jac2d.c\",\"t\":21},\"times\":{\"comm\":4.076957702636719e-05,\"comm_start\":0.0,\"efficiency\":0.9997661784673614,\"exec_time\":0.1743619441986084,\"gpu_time_lost\":0.0,\"gpu_time_prod\":0.0,\"idle\":0.0,\"insuf\":0.0,\"insuf_sys\":0.0,\"insuf_user\":0.0,\"load_imb\":0.0,\"lost_time\":4.076957702636719e-05,\"nproc\":1,\"overlap\":1.0251998901367188e-05,\"prod_cpu\":0.16165733337402344,\"prod_io\":0.011024713516235352,\"prod_sys\":0.0016391277313232422,\"real_comm\":1.9073486328125e-06,\"synch\":0.0,\"sys_time\":0.1743619441986084,\"thr_sys_time\":0.0,\"thr_user_time\":0.0,\"threadsOfAllProcs\":4,\"time_var\":0.0}},{\"id\":{\"expr\":1,\"nenter\":1.0,\"nlev\":1,\"nline\":29,\"nline_end\":36,\"pname\":\"jac2d.c\",\"t\":23},\"times\":{\"comm\":0.0,\"comm_start\":0.0,\"efficiency\":1.0,\"exec_time\":9.799003601074219e-05,\"gpu_time_lost\":0.0,\"gpu_time_prod\":0.0,\"idle\":0.0,\"insuf\":0.0,\"insuf_sys\":0.0,\"insuf_user\":0.0,\"load_imb\":0.0,\"lost_time\":0.0,\"nproc\":1,\"overlap\":0.0,\"prod_cpu\":7.152557373046875e-06,\"prod_io\":0.0,\"prod_sys\":9.083747863769531e-05,\"real_comm\":0.0,\"synch\":0.0,\"sys_time\":9.799003601074219e-05,\"thr_sys_time\":0.0,\"thr_user_time\":0.0,\"threadsOfAllProcs\":4,\"time_var\":0.0}},{\"id\":{\"expr\":11,\"nenter\":1.0,\"nlev\":2,\"nline\":30,\"nline_end\":31,\"pname\":\"jac2d.c\",\"t\":23},\"times\":{\"comm\":0.0,\"comm_start\":0.0,\"efficiency\":1.0,\"exec_time\":2.4080276489257813e-05,\"gpu_time_lost\":0.0,\"gpu_time_prod\":0.0,\"idle\":0.0,\"insuf\":0.0,\"insuf_sys\":0.0,\"insuf_user\":0.0,\"load_imb\":0.0,\"lost_time\":0.0,\"nproc\":1,\"overlap\":0.0,\"prod_cpu\":3.0994415283203125e-06,\"prod_io\":0.0,\"prod_sys\":2.09808349609375e-05,\"real_comm\":0.0,\"synch\":0.0,\"sys_time\":2.4080276489257813e-05,\"thr_sys_time\":0.0,\"thr_user_time\":0.0,\"threadsOfAllProcs\":4,\"time_var\":0.0}},{\"id\":{\"expr\":12,\"nenter\":1.0,\"nlev\":2,\"nline\":32,\"nline_end\":33,\"pname\":\"jac2d.c\",\"t\":23},\"times\":{\"comm\":0.0,\"comm_start\":0.0,\"efficiency\":1.0,\"exec_time\":2.8133392333984375e-05,\"gpu_time_lost\":0.0,\"gpu_time_prod\":0.0,\"idle\":0.0,\"insuf\":0.0,\"insuf_sys\":0.0,\"insuf_user\":0.0,\"load_imb\":0.0,\"lost_time\":0.0,\"nproc\":1,\"overlap\":0.0,\"prod_cpu\":1.1920928955078125e-06,\"prod_io\":0.0,\"prod_sys\":2.6941299438476563e-05,\"real_comm\":0.0,\"synch\":0.0,\"sys_time\":2.8133392333984375e-05,\"thr_sys_time\":0.0,\"thr_user_time\":0.0,\"threadsOfAllProcs\":4,\"time_var\":0.0}},{\"id\":{\"expr\":13,\"nenter\":1.0,\"nlev\":2,\"nline\":34,\"nline_end\":35,\"pname\":\"jac2d.c\",\"t\":23},\"times\":{\"comm\":0.0,\"comm_start\":0.0,\"efficiency\":1.0,\"exec_time\":2.193450927734375e-05,\"gpu_time_lost\":0.0,\"gpu_time_prod\":0.0,\"idle\":0.0,\"insuf\":0.0,\"insuf_sys\":0.0,\"insuf_user\":0.0,\"load_imb\":0.0,\"lost_time\":0.0,\"nproc\":1,\"overlap\":0.0,\"prod_cpu\":9.5367431640625e-07,\"prod_io\":0.0,\"prod_sys\":2.09808349609375e-05,\"real_comm\":0.0,\"synch\":0.0,\"sys_time\":2.193450927734375e-05,\"thr_sys_time\":0.0,\"thr_user_time\":0.0,\"threadsOfAllProcs\":4,\"time_var\":0.0}},{\"id\":{\"expr\":2,\"nenter\":1.0,\"nlev\":1,\"nline\":38,\"nline_end\":43,\"pname\":\"jac2d.c\",\"t\":23},\"times\":{\"comm\":0.0,\"comm_start\":0.0,\"efficiency\":1.0,\"exec_time\":6.890296936035156e-05,\"gpu_time_lost\":0.0,\"gpu_time_prod\":0.0,\"idle\":0.0,\"insuf\":0.0,\"insuf_sys\":0.0,\"insuf_user\":0.0,\"load_imb\":0.0,\"lost_time\":0.0,\"nproc\":1,\"overlap\":0.0,\"prod_cpu\":9.5367431640625e-07,\"prod_io\":0.0,\"prod_sys\":6.794929504394531e-05,\"real_comm\":0.0,\"synch\":0.0,\"sys_time\":6.890296936035156e-05,\"thr_sys_time\":0.0,\"thr_user_time\":0.0,\"threadsOfAllProcs\":4,\"time_var\":0.0}},{\"id\":{\"expr\":21,\"nenter\":1.0,\"nlev\":2,\"nline\":39,\"nline_end\":40,\"pname\":\"jac2d.c\",\"t\":23},\"times\":{\"comm\":0.0,\"comm_start\":0.0,\"efficiency\":1.0,\"exec_time\":2.4080276489257813e-05,\"gpu_time_lost\":0.0,\"gpu_time_prod\":0.0,\"idle\":0.0,\"insuf\":0.0,\"insuf_sys\":0.0,\"insuf_user\":0.0,\"load_imb\":0.0,\"lost_time\":0.0,\"nproc\":1,\"overlap\":0.0,\"prod_cpu\":0.0,\"prod_io\":0.0,\"prod_sys\":2.4080276489257813e-05,\"real_comm\":0.0,\"synch\":0.0,\"sys_time\":2.4080276489257813e-05,\"thr_sys_time\":0.0,\"thr_user_time\":0.0,\"threadsOfAllProcs\":4,\"time_var\":0.0}},{\"id\":{\"expr\":22,\"nenter\":1.0,\"nlev\":2,\"nline\":41,\"nline_end\":42,\"pname\":\"jac2d.c\",\"t\":23},\"times\":{\"comm\":0.0,\"comm_start\":0.0,\"efficiency\":1.0,\"exec_time\":2.193450927734375e-05,\"gpu_time_lost\":0.0,\"gpu_time_prod\":0.0,\"idle\":0.0,\"insuf\":0.0,\"insuf_sys\":0.0,\"insuf_user\":0.0,\"load_imb\":0.0,\"lost_time\":0.0,\"nproc\":1,\"overlap\":0.0,\"prod_cpu\":9.5367431640625e-07,\"prod_io\":0.0,\"prod_sys\":2.09808349609375e-05,\"real_comm\":0.0,\"synch\":0.0,\"sys_time\":2.193450927734375e-05,\"thr_sys_time\":0.0,\"thr_user_time\":0.0,\"threadsOfAllProcs\":4,\"time_var\":0.0}},{\"id\":{\"expr\":4,\"nenter\":1.0,\"nlev\":1,\"nline\":86,\"nline_end\":91,\"pname\":\"jac2d.c\",\"t\":23},\"times\":{\"comm\":0.0,\"comm_start\":0.0,\"efficiency\":1.0,\"exec_time\":0.010898113250732422,\"gpu_time_lost\":0.0,\"gpu_time_prod\":0.0,\"idle\":0.0,\"insuf\":0.0,\"insuf_sys\":0.0,\"insuf_user\":0.0,\"load_imb\":0.0,\"lost_time\":0.0,\"nproc\":1,\"overlap\":0.0,\"prod_cpu\":3.981590270996094e-05,\"prod_io\":0.010836124420166016,\"prod_sys\":2.2172927856445313e-05,\"real_comm\":1.9073486328125e-06,\"synch\":0.0,\"sys_time\":0.010898113250732422,\"thr_sys_time\":0.0,\"thr_user_time\":0.0,\"threadsOfAllProcs\":4,\"time_var\":0.0}}],\"iscomp\":false,\"nproc\":1,\"proc\":[{\"node_name\":\"MacBook-Penek.local\",\"test_time\":0.8039350000000001}]}";
//        std::cout << j << std::endl << std::endl;

        std::cout << "I'm alive\n";

        if (stat_intersect_((char*) s1, (char*) s2, res1, res2)){
            printf("not working ((((9 \n\n");
            return 1;
        }
//
//        std::cout << res1 << std::endl << std::endl << res2 << std::endl << std::endl;

	}
	catch(...){
		printf("error!");
	}
	return 0;
}
